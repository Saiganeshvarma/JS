<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D6FMVW70XR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-D6FMVW70XR');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn JavaScript - Interactive Tutorial</title>
    <!-- Add CodeMirror CSS and JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/javascript-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: 80vh;
        }

        .sidebar {
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
        }

        .sidebar h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .lesson-list {
            list-style: none;
        }

        .lesson-item {
            margin-bottom: 8px;
        }

        .lesson-btn {
            width: 100%;
            padding: 12px 15px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            font-size: 14px;
            color: #495057;
        }

        .lesson-btn:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .lesson-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .content-area {
            padding: 30px;
            overflow-y: auto;
        }

        .lesson-content {
            display: none;
        }

        .lesson-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lesson-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            background: #f4f7fb;
            border-radius: 10px 10px 0 0;
            padding-top: 18px;
            padding-left: 18px;
            padding-right: 18px;
        }

        .lesson-text {
            line-height: 1.8;
            margin-bottom: 24px;
            font-size: 18px;
            color: #444;
            background: #f4f7fb;
            border-radius: 0 0 10px 10px;
            padding: 22px 18px 22px 18px;
            min-height: 80px;
            box-shadow: 0 2px 8px rgba(159, 173, 231, 0.06);
        }

        .code-example {
            background: #1e1e1e;
            color: #f8f8f2;
            padding: 20px;
            min-height: 100px;
            max-height: 600px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            white-space: pre-wrap;
            overflow-y: auto;
            line-height: 1.5;
            height: auto;
        }

        .code-example::before {
            content: 'JavaScript';
            position: absolute;
            top: -10px;
            left: 20px;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .code-editor {
            margin: 20px 0;
            border: 2px solid #667eea;
            border-radius: 10px;
            overflow: hidden;
        }

        .editor-header {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-textarea {
            width: 100%;
            height: 500px;
            padding: 15px;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: #1e1e1e;
            color: #f8f8f2;
            resize: vertical;
            outline: none;
        }

        /* Add CodeMirror custom styles */
        .CodeMirror {
            height: 500px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .CodeMirror-hints {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            z-index: 1000;
        }

        .run-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            min-height: 50px;
            white-space: pre-wrap;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .prev-btn {
            background: #6c757d;
            color: white;
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            border-radius: 5px;
        }

        .syntax-highlight {
            color: #e83e8c;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
                max-height: 300px;
            }
            
            .content-area {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Learn JavaScript</h1>
            <p>Master JavaScript with interactive lessons and hands-on coding</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>üìö Lessons</h3>
                <ul class="lesson-list" id="lessonList">
                    <!-- Lessons will be populated by JavaScript -->
                </ul>
            </div>

            <div class="content-area">
                <div id="lessonContent">
                    <!-- Lesson content will be populated by JavaScript -->
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn prev-btn" id="prevBtn" onclick="previousLesson()">‚Üê Previous</button>
                    <button class="nav-btn next-btn" id="nextBtn" onclick="nextLesson()">Next ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLesson = 0;
        
        const lessons = [
            {
                title: "Introduction to JavaScript",
                content: `
                    <h2 class="lesson-title">üåü Welcome to JavaScript!</h2>
                    <div class="lesson-text">
                        JavaScript is a versatile programming language that powers the web. It's used for creating interactive websites, web applications, mobile apps, and even server-side development.
                    </div>
                    <div class="highlight">
                        <strong>Fun Fact:</strong> JavaScript was created in just 10 days by Brendan Eich in 1995!
                    </div>
                    <div class="lesson-text">
                        <strong>What can you do with JavaScript?</strong><br>
                        ‚Ä¢ Make websites interactive<br>
                        ‚Ä¢ Create web applications<br>
                        ‚Ä¢ Build mobile apps<br>
                        ‚Ä¢ Develop games<br>
                        ‚Ä¢ Server-side programming
                    </div>
                `,
                hasEditor: false
            },
            {
                title: "Your First JavaScript Code",
                content: `
                    <h2 class="lesson-title">üíª Hello, World!</h2>
                    <div class="lesson-text">
                        Let's start with the traditional "Hello, World!" program. In JavaScript, we use <span class="syntax-highlight">console.log()</span> to display output.
                    </div>
                    <div class="code-example">console.log("Hello, World!");</div>
                    <div class="lesson-text">
                        Try running this code in the editor below. Click the "Run Code" button to see the output!
                    </div>
                `,
                hasEditor: true,
                defaultCode: 'console.log("Hello, World!");'
            },
            {
                title: "Variables and Data Types",
                content: `
                    <h2 class="lesson-title">üì¶ Variables and Data Types</h2>
                    <div class="lesson-text">
                        Variables are containers that store data. JavaScript has several data types:
                    </div>
                    <div class="lesson-text">
                        <strong>Declaring Variables:</strong><br>
                        ‚Ä¢ <span class="syntax-highlight">let</span> - for variables that can change<br>
                        ‚Ä¢ <span class="syntax-highlight">const</span> - for constants<br>
                        ‚Ä¢ <span class="syntax-highlight">var</span> - older way (avoid in modern code)
                    </div>
                    <div class="code-example">// Different data types
let name = "John";        // String
let age = 25;             // Number
let isStudent = true;     // Boolean
let hobbies = ["reading", "coding"];  // Array
let person = {name: "Alice", age: 30}; // Object</div>
                    <div class="lesson-text">
                        Try creating your own variables below:
                    </div>
                `,
                hasEditor: true,
                defaultCode: `// Try creating different types of variables
let yourName = "Your Name Here";
let yourAge = 20;
let isLearning = true;

console.log("Name:", yourName);
console.log("Age:", yourAge);
console.log("Learning JavaScript:", isLearning);`
            },
            {
                title: "Numbers and Math",
                content: `
                    <h2 class="lesson-title">üî¢ Working with Numbers</h2>
                    <div class="lesson-text">
                        JavaScript has one number type that handles both integers and decimals. You can perform various mathematical operations.
                    </div>
                    <div class="code-example">// Basic math operations
let a = 10;
let b = 3;

console.log(a + b);  // Addition: 13
console.log(a - b);  // Subtraction: 7
console.log(a * b);  // Multiplication: 30
console.log(a / b);  // Division: 3.333...
console.log(a % b);  // Modulo (remainder): 1</div>
                    <div class="lesson-text">
                        JavaScript also has a built-in <span class="syntax-highlight">Math</span> object with useful methods:
                    </div>
                    <div class="code-example">Math.round(4.7);    // 5
Math.floor(4.7);    // 4
Math.ceil(4.3);     // 5
Math.random();      // Random number between 0 and 1</div>
                `,
                hasEditor: true,
                defaultCode: `// Try some math operations
let num1 = 15;
let num2 = 4;

console.log("Addition:", num1 + num2);
console.log("Division:", num1 / num2);
console.log("Remainder:", num1 % num2);

// Using Math object
console.log("Random number:", Math.random());
console.log("Rounded:", Math.round(7.8));`
            },
            {
                title: "Strings and Text",
                content: `
                    <h2 class="lesson-title">üìù Working with Strings</h2>
                    <div class="lesson-text">
                        Strings are text data. You can create them using single quotes, double quotes, or template literals.
                    </div>
                    <div class="code-example">let message1 = "Hello World";
let message2 = 'Hello World';
let message3 = \`Hello World\`;  // Template literal</div>
                    <div class="lesson-text">
                        <strong>String Methods:</strong>
                    </div>
                    <div class="code-example">let text = "JavaScript is awesome!";

console.log(text.length);           // 21
console.log(text.toUpperCase());    // "JAVASCRIPT IS AWESOME!"
console.log(text.toLowerCase());    // "javascript is awesome!"
console.log(text.indexOf("Script")); // 4</div>
                    <div class="lesson-text">
                        <strong>Template Literals</strong> allow you to embed variables:
                    </div>
                    <div class="code-example">let name = "Alice";
let age = 25;
let message = \`My name is \${name} and I am \${age} years old.\`;</div>
                `,
                hasEditor: true,
                defaultCode: `// Try string operations
let firstName = "John";
let lastName = "Doe";

// Concatenation
let fullName = firstName + " " + lastName;
console.log("Full name:", fullName);

// Template literal
let greeting = \`Hello, \${firstName}! Welcome to JavaScript.\`;
console.log(greeting);

// String methods
console.log("Length:", fullName.length);
console.log("Uppercase:", fullName.toUpperCase());`
            },
            {
                title: "Conditional Statements",
                content: `
                    <h2 class="lesson-title">ü§î Making Decisions with If Statements</h2>
                    <div class="lesson-text">
                        Conditional statements allow your program to make decisions based on different conditions.
                    </div>
                    <div class="code-example">let age = 18;

if (age >= 18) {
    console.log("You are an adult");
} else {
    console.log("You are a minor");
}</div>
                    <div class="lesson-text">
                        You can also use <span class="syntax-highlight">else if</span> for multiple conditions:
                    </div>
                    <div class="code-example">let score = 85;

if (score >= 90) {
    console.log("Grade: A");
} else if (score >= 80) {
    console.log("Grade: B");
} else if (score >= 70) {
    console.log("Grade: C");
} else {
    console.log("Grade: F");
}</div>
                    <div class="highlight">
                        <strong>Comparison Operators:</strong><br>
                        === (equal), !== (not equal), > (greater), < (less), >= (greater or equal), <= (less or equal)
                    </div>
                `,
                hasEditor: true,
                defaultCode: `// Try conditional statements
let temperature = 25;

if (temperature > 30) {
    console.log("It's hot outside!");
} else if (temperature > 20) {
    console.log("Nice weather!");
} else {
    console.log("It's cold outside!");
}

// Try changing the temperature value and run again
let userAge = 16;
let canVote = userAge >= 18;
console.log("Can vote:", canVote);`
            },
            {
                title: "Loops",
                content: `
                    <h2 class="lesson-title">üîÑ Repeating Code with Loops</h2>
                    <div class="lesson-text">
                        Loops allow you to repeat code multiple times. Here are the main types of loops in JavaScript:
                    </div>
                    <div class="lesson-text">
                        <strong>For Loop:</strong> When you know how many times to repeat
                    </div>
                    <div class="code-example">for (let i = 1; i <= 5; i++) {
    console.log("Count: " + i);
}</div>
                    <div class="lesson-text">
                        <strong>While Loop:</strong> Repeats while a condition is true
                    </div>
                    <div class="code-example">let count = 1;
while (count <= 3) {
    console.log("While count: " + count);
    count++;
}</div>
                    <div class="lesson-text">
                        <strong>For...of Loop:</strong> Great for arrays
                    </div>
                    <div class="code-example">let fruits = ["apple", "banana", "orange"];
for (let fruit of fruits) {
    console.log("I like " + fruit);
}</div>
                `,
                hasEditor: true,
                defaultCode: `// Try different types of loops

// For loop - counting
console.log("=== For Loop ===");
for (let i = 1; i <= 5; i++) {
    console.log("Number:", i);
}

// While loop
console.log("\\n=== While Loop ===");
let countdown = 3;
while (countdown > 0) {
    console.log("Countdown:", countdown);
    countdown--;
}

// For...of loop with array
console.log("\\n=== For...of Loop ===");
let colors = ["red", "green", "blue"];
for (let color of colors) {
    console.log("Color:", color);
}`
            },
            {
                title: "Functions",
                content: `
                    <h2 class="lesson-title">‚öôÔ∏è Functions - Reusable Code Blocks</h2>
                    <div class="lesson-text">
                        Functions are reusable blocks of code that perform specific tasks. They help keep your code organized and avoid repetition.
                    </div>
                    <div class="lesson-text">
                        <strong>Function Declaration:</strong>
                    </div>
                    <div class="code-example">function greet(name) {
    return "Hello, " + name + "!";
}

let message = greet("Alice");
console.log(message);  // "Hello, Alice!"</div>
                    <div class="lesson-text">
                        <strong>Arrow Functions:</strong> A shorter way to write functions
                    </div>
                    <div class="code-example">const add = (a, b) => {
    return a + b;
};

// Even shorter for simple functions
const multiply = (a, b) => a * b;

console.log(add(5, 3));      // 8
console.log(multiply(4, 2)); // 8</div>
                    <div class="highlight">
                        <strong>Why use functions?</strong><br>
                        ‚Ä¢ Avoid repeating code<br>
                        ‚Ä¢ Make code more readable<br>
                        ‚Ä¢ Easier to test and debug<br>
                        ‚Ä¢ Can be reused multiple times
                    </div>
                `,
                hasEditor: true,
                defaultCode: `// Try creating and using functions

// Function to calculate area of rectangle
function calculateArea(width, height) {
    return width * height;
}

// Function to greet user
const greetUser = (name, age) => {
    return \`Hi \${name}, you are \${age} years old!\`;
};

// Using the functions
let area = calculateArea(5, 3);
console.log("Area:", area);

let greeting = greetUser("John", 25);
console.log(greeting);

// Function with default parameter
const sayHello = (name = "World") => {
    return "Hello, " + name + "!";
};

console.log(sayHello());        // Hello, World!
console.log(sayHello("Alice")); // Hello, Alice!`
            },
            {
                title: "Arrays",
                content: `
                    <h2 class="lesson-title">üìö Arrays - Lists of Data</h2>
                    <div class="lesson-text">
                        Arrays are used to store multiple values in a single variable. They're like lists that can hold any type of data.
                    </div>
                    <div class="code-example">// Creating arrays
let fruits = ["apple", "banana", "orange"];
let numbers = [1, 2, 3, 4, 5];
let mixed = ["hello", 42, true, "world"];</div>
                    <div class="lesson-text">
                        <strong>Array Methods:</strong>
                    </div>
                    <div class="code-example">let colors = ["red", "green", "blue"];

// Adding elements
colors.push("yellow");        // Add to end
colors.unshift("purple");     // Add to beginning

// Removing elements
colors.pop();                 // Remove from end
colors.shift();               // Remove from beginning

// Other useful methods
console.log(colors.length);   // Get array length
console.log(colors.indexOf("green")); // Find index of element</div>
                    <div class="lesson-text">
                        <strong>Accessing Array Elements:</strong>
                    </div>
                    <div class="code-example">let animals = ["cat", "dog", "bird"];
console.log(animals[0]);      // "cat" (first element)
console.log(animals[1]);      // "dog" (second element)
console.log(animals[2]);      // "bird" (third element)</div>
                `,
                hasEditor: true,
                defaultCode: `// Try working with arrays

let hobbies = ["reading", "coding", "gaming"];
console.log("My hobbies:", hobbies);
console.log("First hobby:", hobbies[0]);

// Adding new hobbies
hobbies.push("cooking");
hobbies.push("traveling");
console.log("Updated hobbies:", hobbies);
console.log("Total hobbies:", hobbies.length);

// Loop through array
console.log("\\n=== All my hobbies ===");
for (let i = 0; i < hobbies.length; i++) {
    console.log((i + 1) + ". " + hobbies[i]);
}

// Using for...of loop
console.log("\\n=== Using for...of ===");
for (let hobby of hobbies) {
    console.log("I enjoy " + hobby);
}`
            },
            {
                title: "Objects",
                content: `
                    <h2 class="lesson-title">üè† Objects - Storing Related Data</h2>
                    <div class="lesson-text">
                        Objects are used to store related data and functionality together. They consist of key-value pairs called properties.
                    </div>
                    <div class="code-example">// Creating an object
let person = {
    name: "Alice",
    age: 25,
    city: "New York",
    isStudent: false
};

// Accessing properties
console.log(person.name);        // "Alice"
console.log(person["age"]);      // 25</div>
                    <div class="lesson-text">
                        <strong>Adding and Modifying Properties:</strong>
                    </div>
                    <div class="code-example">let car = {
    brand: "Toyota",
    model: "Camry",
    year: 2020
};

// Adding new property
car.color = "blue";

// Modifying existing property
car.year = 2021;

console.log(car);</div>
                    <div class="lesson-text">
                        <strong>Objects with Methods:</strong>
                    </div>
                    <div class="code-example">let calculator = {
    add: function(a, b) {
        return a + b;
    },
    subtract: (a, b) => a - b
};

console.log(calculator.add(5, 3));      // 8
console.log(calculator.subtract(10, 4)); // 6</div>
                `,
                hasEditor: true,
                defaultCode: `// Try creating and using objects

let student = {
    name: "John Doe",
    age: 20,
    grade: "A",
    subjects: ["Math", "Science", "English"],
    isEnrolled: true
};

console.log("Student Info:");
console.log("Name:", student.name);
console.log("Age:", student.age);
console.log("Grade:", student.grade);
console.log("Subjects:", student.subjects);

// Adding new property
student.school = "ABC University";
student.graduationYear = 2025;

console.log("\\nUpdated Info:");
console.log("School:", student.school);
console.log("Graduation Year:", student.graduationYear);

// Object with methods
let book = {
    title: "JavaScript Guide",
    pages: 300,
    read: 0,
    
    readPages: function(numPages) {
        this.read += numPages;
        return \`You've read \${this.read} out of \${this.pages} pages\`;
    }
};

console.log("\\n" + book.readPages(50));
console.log(book.readPages(25));`
            },
            {
                title: "DOM Manipulation",
                content: `
                    <h2 class="lesson-title">üå≥ DOM Manipulation</h2>
                    <div class="lesson-text">
                        The Document Object Model (DOM) represents your webpage as a tree of objects. JavaScript can manipulate these objects to change the webpage dynamically.
                    </div>
                    <div class="code-example">// Selecting elements
const element = document.getElementById('myId');
const elements = document.getElementsByClassName('myClass');
const tags = document.getElementsByTagName('div');
const query = document.querySelector('.myClass');
const queries = document.querySelectorAll('p');</div>
                    <div class="lesson-text">
                        <strong>Modifying Elements:</strong>
                    </div>
                    <div class="code-example">// Changing content
element.textContent = 'New text';
element.innerHTML = '<span>HTML content</span>';

// Modifying styles
element.style.color = 'red';
element.style.backgroundColor = 'blue';

// Adding/removing classes
element.classList.add('newClass');
element.classList.remove('oldClass');
element.classList.toggle('active');</div>
                    <div class="lesson-text">
                        <strong>Creating and Adding Elements:</strong>
                    </div>
                    <div class="code-example">// Create new element
const newDiv = document.createElement('div');
newDiv.textContent = 'New element';

// Add to page
document.body.appendChild(newDiv);
// or
parentElement.appendChild(newDiv);</div>
                `,
                hasEditor: true,
                defaultCode: `// Try DOM manipulation
// Create a new paragraph
const newParagraph = document.createElement('p');
newParagraph.textContent = 'This is a new paragraph!';
newParagraph.style.color = 'blue';
newParagraph.style.fontSize = '18px';

// Add it to the page
document.body.appendChild(newParagraph);

// Create a button
const button = document.createElement('button');
button.textContent = 'Click me!';
button.style.padding = '10px';
button.style.margin = '10px';

// Add click event
button.onclick = function() {
    alert('Button clicked!');
};

// Add button to page
document.body.appendChild(button);`
            },
            {
                title: "Events and Event Handling",
                content: `
                    <h2 class="lesson-title">üéØ Events and Event Handling</h2>
                    <div class="lesson-text">
                        Events are actions that happen in your webpage, like clicks, mouse movements, or keyboard presses. JavaScript can listen for these events and respond to them.
                    </div>
                    <div class="code-example">// Adding event listeners
element.addEventListener('click', function(event) {
    console.log('Element clicked!');
});

// Common events:
// - click
// - mouseover
// - mouseout
// - keydown
// - keyup
// - submit
// - load</div>
                    <div class="lesson-text">
                        <strong>Event Object:</strong>
                    </div>
                    <div class="code-example">element.addEventListener('click', function(event) {
    console.log('Event type:', event.type);
    console.log('Target element:', event.target);
    console.log('Mouse position:', event.clientX, event.clientY);
});</div>
                    <div class="lesson-text">
                        <strong>Preventing Default Behavior:</strong>
                    </div>
                    <div class="code-example">form.addEventListener('submit', function(event) {
    event.preventDefault(); // Prevents form submission
    // Handle form data here
});</div>
                `,
                hasEditor: true,
                defaultCode: `// Create elements for event handling
const container = document.createElement('div');
container.style.padding = '20px';
container.style.border = '1px solid black';

const button = document.createElement('button');
button.textContent = 'Click me!';
button.style.margin = '10px';

const input = document.createElement('input');
input.type = 'text';
input.placeholder = 'Type something...';
input.style.margin = '10px';

// Add elements to container
container.appendChild(button);
container.appendChild(input);
document.body.appendChild(container);

// Add event listeners
button.addEventListener('click', function(event) {
    console.log('Button clicked!');
    alert('Button clicked!');
});

input.addEventListener('keyup', function(event) {
    console.log('Input value:', event.target.value);
});

// Mouse events
container.addEventListener('mouseover', function() {
    this.style.backgroundColor = '#f0f0f0';
});

container.addEventListener('mouseout', function() {
    this.style.backgroundColor = 'white';
});`
            },
            {
                title: "Async JavaScript",
                content: `
                    <h2 class="lesson-title">‚è≥ Async JavaScript</h2>
                    <div class="lesson-text">
                        Asynchronous JavaScript allows your code to run without blocking other operations. This is crucial for handling operations like API calls, file operations, or timers.
                    </div>
                    <div class="lesson-text">
                        <strong>Promises:</strong>
                    </div>
                    <div class="code-example">// Creating a promise
const myPromise = new Promise((resolve, reject) => {
    // Async operation here
    if (success) {
        resolve('Success!');
    } else {
        reject('Error!');
    }
});

// Using promises
myPromise
    .then(result => console.log(result))
    .catch(error => console.error(error));</div>
                    <div class="lesson-text">
                        <strong>Async/Await:</strong>
                    </div>
                    <div class="code-example">async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error:', error);
    }
}</div>
                    <div class="lesson-text">
                        <strong>setTimeout and setInterval:</strong>
                    </div>
                    <div class="code-example">// setTimeout - runs once after delay
setTimeout(() => {
    console.log('This runs after 2 seconds');
}, 2000);

// setInterval - runs repeatedly
setInterval(() => {
    console.log('This runs every 2 seconds');
}, 2000);</div>
                `,
                hasEditor: true,
                defaultCode: `// Try async operations

// Promise example
function simulateAsyncOperation() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            const success = Math.random() > 0.5;
            if (success) {
                resolve('Operation successful!');
            } else {
                reject('Operation failed!');
            }
        }, 1000);
    });
}

// Using promises
console.log('Starting operation...');
simulateAsyncOperation()
    .then(result => console.log(result))
    .catch(error => console.error(error));

// Async/await example
async function runAsyncOperation() {
    try {
        console.log('Starting async operation...');
        const result = await simulateAsyncOperation();
        console.log(result);
    } catch (error) {
        console.error(error);
    }
}

// Run the async function
runAsyncOperation();

// Timer example
let count = 0;
const timer = setInterval(() => {
    count++;
    console.log(\`Count: \${count}\`);
    if (count >= 5) {
        clearInterval(timer);
        console.log('Timer stopped!');
    }
}, 1000);`
            },
            {
                title: "Error Handling",
                content: `
                    <h2 class="lesson-title">‚ö†Ô∏è Error Handling</h2>
                    <div class="lesson-text">
                        Error handling is crucial for creating robust applications. JavaScript provides several ways to handle errors and exceptions.
                    </div>
                    <div class="lesson-text">
                        <strong>Try-Catch Blocks:</strong>
                    </div>
                    <div class="code-example">try {
    // Code that might throw an error
    throw new Error('Something went wrong!');
} catch (error) {
    console.error('Error caught:', error.message);
} finally {
    // Code that runs regardless of success or failure
    console.log('Cleanup code');
}</div>
                    <div class="lesson-text">
                        <strong>Custom Error Types:</strong>
                    </div>
                    <div class="code-example">class ValidationError extends Error {
    constructor(message) {
        super(message);
        this.name = 'ValidationError';
    }
}

try {
    throw new ValidationError('Invalid input');
} catch (error) {
    if (error instanceof ValidationError) {
        console.log('Validation error:', error.message);
    } else {
        console.log('Other error:', error.message);
    }
}</div>
                    <div class="lesson-text">
                        <strong>Error Handling Best Practices:</strong>
                    </div>
                    <div class="code-example">// Always handle promises
fetch('https://api.example.com/data')
    .then(response => response.json())
    .catch(error => console.error('Fetch error:', error));

// Use optional chaining
const value = object?.property?.nestedProperty;

// Use nullish coalescing
const defaultValue = value ?? 'default';</div>
                `,
                hasEditor: true,
                defaultCode: `// Try error handling

// Function that might throw an error
function divideNumbers(a, b) {
    if (b === 0) {
        throw new Error('Division by zero is not allowed!');
    }
    return a / b;
}

// Try-catch example
try {
    console.log('Result:', divideNumbers(10, 2));
    console.log('Result:', divideNumbers(10, 0)); // This will throw an error
} catch (error) {
    console.error('Error caught:', error.message);
} finally {
    console.log('Operation completed');
}

// Custom error class
class AgeError extends Error {
    constructor(message) {
        super(message);
        this.name = 'AgeError';
    }
}

// Function using custom error
function validateAge(age) {
    if (age < 0) {
        throw new AgeError('Age cannot be negative!');
    }
    if (age > 150) {
        throw new AgeError('Age seems invalid!');
    }
    return true;
}

// Try custom error
try {
    validateAge(-5);
} catch (error) {
    if (error instanceof AgeError) {
        console.error('Age validation error:', error.message);
    } else {
        console.error('Other error:', error.message);
    }
}`
            },
            {
                title: "Local Storage",
                content: `
                    <h2 class="lesson-title">üíæ Local Storage</h2>
                    <div class="lesson-text">
                        Local Storage allows you to store data in the browser that persists even after the page is closed. It's useful for saving user preferences, form data, or application state.
                    </div>
                    <div class="code-example">// Saving data
localStorage.setItem('username', 'John');
localStorage.setItem('age', '25');

// Reading data
const username = localStorage.getItem('username');
const age = localStorage.getItem('age');

// Removing data
localStorage.removeItem('username');

// Clearing all data
localStorage.clear();</div>
                    <div class="lesson-text">
                        <strong>Working with Objects:</strong>
                    </div>
                    <div class="code-example">// Save object
const user = {
    name: 'Alice',
    preferences: {
        theme: 'dark',
        notifications: true
    }
};
localStorage.setItem('user', JSON.stringify(user));

// Read object
const savedUser = JSON.parse(localStorage.getItem('user'));</div>
                    <div class="lesson-text">
                        <strong>Storage Events:</strong>
                    </div>
                    <div class="code-example">window.addEventListener('storage', (event) => {
    console.log('Key:', event.key);
    console.log('New value:', event.newValue);
    console.log('Old value:', event.oldValue);
});</div>
                `,
                hasEditor: true,
                defaultCode: `// Try local storage operations

// Save some data
localStorage.setItem('favoriteColor', 'blue');
localStorage.setItem('lastVisit', new Date().toISOString());

// Read the data
console.log('Favorite color:', localStorage.getItem('favoriteColor'));
console.log('Last visit:', localStorage.getItem('lastVisit'));

// Save an object
const userSettings = {
    theme: 'dark',
    fontSize: 16,
    notifications: true
};
localStorage.setItem('settings', JSON.stringify(userSettings));

// Read the object
const savedSettings = JSON.parse(localStorage.getItem('settings'));
console.log('User settings:', savedSettings);

// Update a setting
savedSettings.fontSize = 18;
localStorage.setItem('settings', JSON.stringify(savedSettings));

// Check if data exists
console.log('Has settings:', localStorage.getItem('settings') !== null);

// Remove one item
localStorage.removeItem('favoriteColor');

// Show all items
console.log('\\nAll items in localStorage:');
for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    console.log(\`\${key}: \${localStorage.getItem(key)}\`);
}`
            },
            {
                title: "JSON and API Basics",
                content: `
                    <h2 class="lesson-title">üåê JSON and API Basics</h2>
                    <div class="lesson-text">
                        JSON (JavaScript Object Notation) is a lightweight data format used for storing and exchanging data. APIs (Application Programming Interfaces) allow different applications to communicate with each other.
                    </div>
                    <div class="lesson-text">
                        <strong>Working with JSON:</strong>
                    </div>
                    <div class="code-example">// Converting to JSON
const person = {
    name: 'John',
    age: 30,
    hobbies: ['reading', 'coding']
};
const jsonString = JSON.stringify(person);

// Parsing JSON
const parsedPerson = JSON.parse(jsonString);</div>
                    <div class="lesson-text">
                        <strong>Making API Requests:</strong>
                    </div>
                    <div class="code-example">// Using fetch
fetch('https://api.example.com/data')
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));

// Using async/await
async function getData() {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error:', error);
    }
}</div>
                    <div class="lesson-text">
                        <strong>Common HTTP Methods:</strong>
                    </div>
                    <div class="code-example">// GET request
fetch('https://api.example.com/data');

// POST request
fetch('https://api.example.com/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        name: 'John',
        age: 30
    })
});</div>
                `,
                hasEditor: true,
                defaultCode: `// Try JSON and API operations

// JSON operations
const user = {
    name: 'Alice',
    age: 25,
    isActive: true,
    hobbies: ['reading', 'coding', 'gaming'],
    address: {
        city: 'New York',
        country: 'USA'
    }
};

// Convert to JSON
const jsonString = JSON.stringify(user, null, 2);
console.log('JSON string:', jsonString);

// Parse JSON
const parsedUser = JSON.parse(jsonString);
console.log('Parsed user:', parsedUser);

// Simulate API request
async function simulateApiRequest() {
    try {
        // Simulate API delay
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // Simulate API response
        return {
            status: 'success',
            data: {
                users: [
                    { id: 1, name: 'John' },
                    { id: 2, name: 'Alice' }
                ]
            }
        };
    } catch (error) {
        throw new Error('API request failed');
    }
}

// Use the simulated API
console.log('\\nFetching data from API...');
simulateApiRequest()
    .then(response => {
        console.log('API Response:', response);
        console.log('Users:', response.data.users);
    })
    .catch(error => console.error('Error:', error.message));`
            },
            {
                title: "Regular Expressions",
                content: `
                    <h2 class="lesson-title">üîç Regular Expressions</h2>
                    <div class="lesson-text">
                        Regular expressions (regex) are patterns used to match character combinations in strings. They're powerful tools for string manipulation and validation.
                    </div>
                    <div class="lesson-text">
                        <strong>Creating Regular Expressions:</strong>
                    </div>
                    <div class="code-example">// Using literal notation
const regex1 = /pattern/;

// Using constructor
const regex2 = new RegExp('pattern');

// Common flags
const regex3 = /pattern/gi;  // g: global, i: case-insensitive</div>
                    <div class="lesson-text">
                        <strong>Common Patterns:</strong>
                    </div>
                    <div class="code-example">// Email validation
const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

// Phone number
const phoneRegex = /^\+?[\d\s-]{10,}$/;

// Password (8+ chars, 1 uppercase, 1 lowercase, 1 number)
const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;</div>
                    <div class="lesson-text">
                        <strong>Using Regular Expressions:</strong>
                    </div>
                    <div class="code-example">// Test if string matches pattern
const isValid = emailRegex.test('user@example.com');

// Find matches
const matches = 'Hello World'.match(/o/g);

// Replace matches
const newString = 'Hello World'.replace(/o/g, '0');

// Split string
const parts = 'Hello,World'.split(/[,\s]/);</div>
                `,
                hasEditor: true,
                defaultCode: `// Try regular expressions

// Email validation
const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
console.log('Email validation:');
console.log('test@example.com:', emailRegex.test('test@example.com'));
console.log('invalid-email:', emailRegex.test('invalid-email'));

// Phone number validation
const phoneRegex = /^\+?[\d\s-]{10,}$/;
console.log('\\nPhone validation:');
console.log('+1 234 567 8900:', phoneRegex.test('+1 234 567 8900'));
console.log('123:', phoneRegex.test('123'));

// Password validation
const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
console.log('\\nPassword validation:');
console.log('Password123:', passwordRegex.test('Password123'));
console.log('weakpass:', passwordRegex.test('weakpass'));

// String manipulation
const text = 'Hello World, Hello JavaScript';
console.log('\\nString manipulation:');
console.log('Replace:', text.replace(/Hello/g, 'Hi'));
console.log('Split:', text.split(/[,\s]/));
console.log('Match:', text.match(/Hello/g));`
            },
            {
                title: "Modules and Import/Export",
                content: `
                    <h2 class="lesson-title">üì¶ Modules and Import/Export</h2>
                    <div class="lesson-text">
                        JavaScript modules allow you to split your code into separate files, making it more maintainable and reusable. Each module can export specific functionality and import from other modules.
                    </div>
                    <div class="lesson-text">
                        <strong>Exporting:</strong>
                    </div>
                    <div class="code-example">// Named exports
export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;

// Default export
export default class Calculator {
    multiply(a, b) {
        return a * b;
    }}</div>
                    <div class="lesson-text">
                        <strong>Importing:</strong>
                    </div>
                    <div class="code-example">// Import named exports
import { add, subtract } from './math.js';

// Import default export
import Calculator from './calculator.js';

// Import everything
import * as math from './math.js';</div>
                    <div class="lesson-text">
                        <strong>Module Features:</strong>
                    </div>
                    <div class="code-example">// Modules are strict by default
'use strict';

// Modules have their own scope
const privateVar = 'private';

// Modules are executed only once
console.log('Module loaded');</div>
                `,
                hasEditor: true,
                defaultCode: `// Simulate module system
// In a real environment, these would be separate files

// math.js
const add = (a, b) => a + b;
const subtract = (a, b) => a - b;
const multiply = (a, b) => a * b;
const divide = (a, b) => a / b;

// Export as an object to simulate module
const math = {
    add,
    subtract,
    multiply,
    divide
};

// Simulate importing and using the module
console.log('Math operations:');
console.log('2 + 3 =', math.add(2, 3));
console.log('5 - 2 =', math.subtract(5, 2));
console.log('4 * 3 =', math.multiply(4, 3));
console.log('10 / 2 =', math.divide(10, 2));

// Simulate another module
const calculator = {
    calculate: function(operation, a, b) {
        switch(operation) {
            case 'add': return math.add(a, b);
            case 'subtract': return math.subtract(a, b);
            case 'multiply': return math.multiply(a, b);
            case 'divide': return math.divide(a, b);
            default: throw new Error('Unknown operation');
        }
    }
};

// Use the calculator
console.log('\\nCalculator:');
console.log('5 + 3 =', calculator.calculate('add', 5, 3));
console.log('10 - 4 =', calculator.calculate('subtract', 10, 4));`
            },
            {
                title: "Web APIs",
                content: `
                    <h2 class="lesson-title">üåê Web APIs</h2>
                    <div class="lesson-text">
                        Web APIs provide powerful features to interact with the browser and device capabilities. Let's explore some commonly used Web APIs.
                    </div>
                    <div class="lesson-text">
                        <strong>Geolocation API:</strong>
                    </div>
                    <div class="code-example">// Get user's location
navigator.geolocation.getCurrentPosition(
    position => {
        console.log('Latitude:', position.coords.latitude);
        console.log('Longitude:', position.coords.longitude);
    },
    error => console.error('Error:', error)
);</div>
                    <div class="lesson-text">
                        <strong>Canvas API:</strong>
                    </div>
                    <div class="code-example">const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

// Draw a rectangle
ctx.fillStyle = 'blue';
ctx.fillRect(10, 10, 100, 100);

// Draw a circle
ctx.beginPath();
ctx.arc(150, 60, 50, 0, Math.PI * 2);
ctx.fillStyle = 'red';
ctx.fill();</div>
                    <div class="lesson-text">
                        <strong>Web Storage API:</strong>
                    </div>
                    <div class="code-example">// Local Storage
localStorage.setItem('key', 'value');
const value = localStorage.getItem('key');

// Session Storage
sessionStorage.setItem('key', 'value');
const sessionValue = sessionStorage.getItem('key');</div>
                `,
                hasEditor: true,
                defaultCode: `// Simulate Web APIs

// Simulate Geolocation
console.log('Geolocation API:');
navigator.geolocation.getCurrentPosition(
    position => {
        console.log('Location:', {
            latitude: position.coords.latitude,
            longitude: position.coords.longitude
        });
    },
    error => {
        console.log('Simulated location:', {
            latitude: 40.7128,
            longitude: -74.0060
        });
    }
);

// Simulate Canvas
console.log('\\nCanvas API:');
const canvas = document.createElement('canvas');
canvas.width = 200;
canvas.height = 200;
document.body.appendChild(canvas);

const ctx = canvas.getContext('2d');

// Draw shapes
ctx.fillStyle = 'blue';
ctx.fillRect(10, 10, 100, 100);

ctx.beginPath();
ctx.arc(150, 60, 50, 0, Math.PI * 2);
ctx.fillStyle = 'red';
ctx.fill();

// Simulate Web Storage
console.log('\\nWeb Storage API:');
localStorage.setItem('testKey', 'testValue');
console.log('Stored value:', localStorage.getItem('testKey'));

// Clean up
localStorage.removeItem('testKey');`
            },
            {
                title: "Testing and Debugging",
                content: `
                    <h2 class="lesson-title">üîç Testing and Debugging</h2>
                    <div class="lesson-text">
                        Testing and debugging are crucial skills for any developer. Let's explore different ways to test and debug JavaScript code.
                    </div>
                    <div class="lesson-text">
                        <strong>Console Methods:</strong>
                    </div>
                    <div class="code-example">// Different console methods
console.log('Regular log');
console.info('Information');
console.warn('Warning');
console.error('Error');
console.table(['apple', 'banana', 'orange']);
console.time('operation');
// ... code ...
console.timeEnd('operation');</div>
                    <div class="lesson-text">
                        <strong>Debugging Tools:</strong>
                    </div>
                    <div class="code-example">// Using debugger
function complexFunction() {
    debugger; // Code execution will pause here
    // ... code ...
}

// Using try-catch for debugging
try {
    // Code that might fail
} catch (error) {
    console.error('Error details:', error);
}</div>
                    <div class="lesson-text">
                        <strong>Unit Testing:</strong>
                    </div>
                    <div class="code-example">// Simple test function
function test(description, testFunction) {
    try {
        testFunction();
        console.log('‚úÖ', description);
    } catch (error) {
        console.error('‚ùå', description);
        console.error(error);
    }
}

// Example test
test('add function works correctly', () => {
    if (add(2, 3) !== 5) {
        throw new Error('add(2, 3) should return 5');
    }
});</div>
                `,
                hasEditor: true,
                defaultCode: `// Try testing and debugging

// Simple test framework
function test(description, testFunction) {
    try {
        testFunction();
        console.log('‚úÖ', description);
    } catch (error) {
        console.error('‚ùå', description);
        console.error(error);
    }
}

// Function to test
function calculateTotal(items) {
    return items.reduce((total, item) => total + item.price, 0);
}

// Run tests
console.log('Running tests\\n');

test('calculateTotal returns 0 for empty array', () => {
    if (calculateTotal([]) !== 0) {
        throw new Error('Should return 0 for empty array');
    }
});

test('calculateTotal calculates correct sum', () => {
    const items = [
        { price: 10 },
        { price: 20 },
        { price: 30 }
    ];
    if (calculateTotal(items) !== 60) {
        throw new Error('Should return 60 for items totaling 60');
    }
});

// Debugging example
console.log('\\nDebugging example:');
function processUser(user) {
    console.log('Processing user:', user);
    
    // Simulate complex processing
    const result = {
        ...user,
        processed: true,
        timestamp: new Date()
    };
    
    console.log('Result:', result);
    return result;
}

// Try processing with invalid data
try {
    processUser(null);
} catch (error) {
    console.error('Error processing user:', error);
}

// Console timing
console.log('\\nPerformance measurement:');
console.time('array operation');
const numbers = Array.from({ length: 1000 }, (_, i) => i);
numbers.map(n => n * 2).filter(n => n > 1000);
console.timeEnd('array operation');`
            },
            {
                title: "Performance Optimization",
                content: `
                    <h2 class="lesson-title">‚ö° Performance Optimization</h2>
                    <div class="lesson-text">
                        Performance optimization is crucial for creating fast and responsive web applications. Let's explore various techniques to improve JavaScript performance.
                    </div>
                    <div class="lesson-text">
                        <strong>Code Optimization:</strong>
                    </div>
                    <div class="code-example">// Avoid unnecessary calculations
const expensive = () => {
    // Cache the result
    if (!expensive.cache) {
        expensive.cache = /* expensive calculation */;
    }
    return expensive.cache;
};

// Use efficient loops
for (let i = 0; i < array.length; i++) {
    // More efficient than forEach for large arrays
}</div>
                    <div class="lesson-text">
                        <strong>Memory Management:</strong>
                    </div>
                    <div class="code-example">// Avoid memory leaks
let largeObject = null;

function processData() {
    largeObject = new Array(1000000);
    // Process data
    largeObject = null; // Clear reference
}

// Use WeakMap for object references
const cache = new WeakMap();</div>
                    <div class="lesson-text">
                        <strong>Performance Best Practices:</strong>
                    </div>
                    <div class="code-example">// Debounce function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Throttle function
function throttle(func, limit) {
    let inThrottle;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}</div>
                `,
                hasEditor: true,
                defaultCode: `// Try performance optimization

// Debounce function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Throttle function
function throttle(func, limit) {
    let inThrottle;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}

// Performance measurement
console.log('Performance tests:\\n');

// Test array methods
console.time('map-filter');
const numbers = Array.from({ length: 1000000 }, (_, i) => i);
const result1 = numbers
    .map(n => n * 2)
    .filter(n => n > 1000000);
console.timeEnd('map-filter');

// Test optimized version
console.time('for-loop');
const result2 = [];
for (let i = 0; i < numbers.length; i++) {
    const doubled = numbers[i] * 2;
    if (doubled > 1000000) {
        result2.push(doubled);
    }
}
console.timeEnd('for-loop');

// Test debounce
const debouncedLog = debounce(() => {
    console.log('Debounced function called');
}, 1000);

console.log('\\nTesting debounce (call multiple times):');
debouncedLog();
debouncedLog();
debouncedLog();

// Test throttle
const throttledLog = throttle(() => {
    console.log('Throttled function called');
}, 1000);

console.log('\\nTesting throttle (call multiple times):');
throttledLog();
throttledLog();
throttledLog();`
            },
            {
                title: "Date and Time Manipulation",
                content: `
                    <h2 class="lesson-title">‚è∞ Date and Time Manipulation</h2>
                    <div class="lesson-text">
                        JavaScript provides the <span class="syntax-highlight">Date</span> object for working with dates and times. You can create, format, and manipulate dates easily.
                    </div>
                    <div class="code-example">// Create a new date (current date and time)
const now = new Date();

// Specific date
const birthday = new Date('2000-01-01T12:00:00');

// Get parts of the date
console.log(now.getFullYear()); // Year
console.log(now.getMonth() + 1); // Month (0-based)
console.log(now.getDate()); // Day
console.log(now.getHours()); // Hours
console.log(now.getMinutes()); // Minutes
console.log(now.getSeconds()); // Seconds

// Format date as string
console.log(now.toLocaleDateString());
console.log(now.toLocaleTimeString());

// Calculate difference between dates
const diff = now - birthday; // in milliseconds
const days = Math.floor(diff / (1000 * 60 * 60 * 24));
console.log('Days since birthday:', days);
</div>
                `,
                hasEditor: true,
                defaultCode: `// Try working with dates
const now = new Date();
console.log('Current date and time:', now);

const newYear = new Date('2025-01-01T00:00:00');
const diff = newYear - now;
const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
console.log('Days until New Year:', daysLeft);

console.log('Year:', now.getFullYear());
console.log('Month:', now.getMonth() + 1);
console.log('Day:', now.getDate());
console.log('Formatted:', now.toLocaleString());`
            },
            {
                title: "ES6+ Features (Destructuring, Spread, Rest, etc.)",
                content: `
                    <h2 class="lesson-title">‚ú® ES6+ Features</h2>
                    <div class="lesson-text">
                        Modern JavaScript (ES6 and beyond) introduced many powerful features that make code more concise and expressive.
                    </div>
                    <div class="lesson-text"><strong>Destructuring:</strong></div>
                    <div class="code-example">const person = { name: 'Alice', age: 25 };
const { name, age } = person;
console.log(name, age);

const arr = [1, 2, 3];
const [first, second] = arr;
console.log(first, second);
</div>
                    <div class="lesson-text"><strong>Spread and Rest:</strong></div>
                    <div class="code-example">// Spread
const arr1 = [1, 2];
const arr2 = [...arr1, 3, 4];
console.log(arr2);

// Rest
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}
console.log(sum(1, 2, 3));
</div>
                    <div class="lesson-text"><strong>Other Features:</strong></div>
                    <div class="code-example">// Template literals
const greeting = \`Hello, \${name}!\`;

// Default parameters
function greet(name = 'Guest') {
    return \`Hello, \${name}!\`;
}

// Arrow functions
const double = n => n * 2;
</div>
                `,
                hasEditor: true,
                defaultCode: `// Try ES6+ features
const user = { name: 'Bob', age: 30 };
const { name, age } = user;
console.log('Destructured:', name, age);

const nums = [10, 20, 30];
const [a, b] = nums;
console.log('Array destructuring:', a, b);

const more = [...nums, 40, 50];
console.log('Spread:', more);

function multiply(...args) {
    return args.reduce((acc, n) => acc * n, 1);
}
console.log('Rest:', multiply(2, 3, 4));

const greet = (name = 'World') => \`Hello, \${name}!\`;
console.log(greet());
console.log(greet('Alice'));`
            },
            {
                title: "Closures and Scope",
                content: `
                    <h2 class="lesson-title">üîí Closures and Scope</h2>
                    <div class="lesson-text">
                        Closures are a fundamental concept in JavaScript, allowing functions to access variables from their outer scope even after the outer function has finished executing.
                    </div>
                    <div class="lesson-text"><strong>Function Scope:</strong></div>
                    <div class="code-example">function outer() {
    let outerVar = 'I am outside!';
    function inner() {
        console.log(outerVar); // Can access outerVar
    }
    return inner;
}
const myClosure = outer();
myClosure(); // Logs: I am outside!
</div>
                    <div class="lesson-text"><strong>Practical Use:</strong></div>
                    <div class="code-example">function makeCounter() {
    let count = 0;
    return function() {
        count++;
        return count;
    };
}
const counter = makeCounter();
console.log(counter()); // 1
console.log(counter()); // 2
</div>
                `,
                hasEditor: true,
                defaultCode: `// Try closures
function makeMultiplier(x) {
    return function(y) {
        return x * y;
    };
}
const double = makeMultiplier(2);
console.log(double(5)); // 10

function secretHolder(secret) {
    return {
        getSecret: () => secret
    };
}
const holder = secretHolder('hidden!');
console.log(holder.getSecret());`
            },
            {
                title: "Design Patterns (Singleton, Module, Observer, etc.)",
                content: `
                    <h2 class="lesson-title">üèóÔ∏è Design Patterns</h2>
                    <div class="lesson-text">
                        Design patterns are common solutions to recurring problems in software design. Here are a few popular patterns in JavaScript:
                    </div>
                    <div class="lesson-text"><strong>Singleton:</strong></div>
                    <div class="code-example">const Singleton = (function() {
    let instance;
    function createInstance() {
        return { id: Math.random() };
    }
    return {
        getInstance: function() {
            if (!instance) {
                instance = createInstance();
            }
            return instance;
        }
    };
})();
const s1 = Singleton.getInstance();
const s2 = Singleton.getInstance();
console.log(s1 === s2); // true
</div>
                    <div class="lesson-text"><strong>Module Pattern:</strong></div>
                    <div class="code-example">const MyModule = (function() {
    let privateVar = 'secret';
    return {
        get: () => privateVar
    };
})();
console.log(MyModule.get());
</div>
                    <div class="lesson-text"><strong>Observer Pattern:</strong></div>
                    <div class="code-example">class Subject {
    constructor() {
        this.observers = [];
    }
    subscribe(fn) {
        this.observers.push(fn);
    }
    notify(data) {
        this.observers.forEach(fn => fn(data));
    }
}
const subject = new Subject();
subject.subscribe(data => console.log('Observer 1:', data));
subject.notify('Hello!');
</div>
                `,
                hasEditor: true,
                defaultCode: `// Try design patterns

// Singleton
const Singleton = (function() {
    let instance;
    function createInstance() {
        return { id: Math.random() };
    }
    return {
        getInstance: function() {
            if (!instance) {
                instance = createInstance();
            }
            return instance;
        }
    };
})();
console.log(Singleton.getInstance() === Singleton.getInstance());

// Module
const CounterModule = (function() {
    let count = 0;
    return {
        increment: () => ++count,
        get: () => count
    };
})();
console.log(CounterModule.increment());
console.log(CounterModule.get());

// Observer
class Subject {
    constructor() {
        this.observers = [];
    }
    subscribe(fn) {
        this.observers.push(fn);
    }
    notify(data) {
        this.observers.forEach(fn => fn(data));
    }
}
const subject = new Subject();
subject.subscribe(msg => console.log('Received:', msg));
subject.notify('Pattern works!');`
            },
            {
                title: "Advanced Functions",
                content: `
                    <h2 class="lesson-title">üöÄ Advanced Functions</h2>
                    <div class="lesson-text">
                        Let's explore advanced function concepts in JavaScript including higher-order functions, currying, and function composition.
                    </div>
                    <div class="code-example">// Higher-order function
function multiplyBy(factor) {
    return function(number) {
        return number * factor;
    };
}

const multiplyByTwo = multiplyBy(2);
console.log(multiplyByTwo(5)); // 10

// Currying
const add = (a) => (b) => a + b;
console.log(add(5)(3)); // 8

// Function composition
const compose = (f, g) => (x) => f(g(x));
const addOne = x => x + 1;
const double = x => x * 2;
const addOneThenDouble = compose(double, addOne);
console.log(addOneThenDouble(3)); // 8</div>
                `,
                hasEditor: true,
                defaultCode: `// Try advanced function concepts

// Higher-order function
function createGreeter(greeting) {
    return function(name) {
        return \`\${greeting}, \${name}!\`;
    };
}

const sayHello = createGreeter('Hello');
const sayHi = createGreeter('Hi');

console.log(sayHello('Alice')); // Hello, Alice!
console.log(sayHi('Bob')); // Hi, Bob!

// Currying
const multiply = (a) => (b) => a * b;
const multiplyByThree = multiply(3);
console.log(multiplyByThree(4)); // 12

// Function composition
const compose = (f, g) => (x) => f(g(x));
const addTwo = x => x + 2;
const square = x => x * x;
const addTwoThenSquare = compose(square, addTwo);
console.log(addTwoThenSquare(3)); // 25`
            },
            {
                title: "Prototypes and Inheritance",
                content: `
                    <h2 class="lesson-title">üîó Prototypes and Inheritance</h2>
                    <div class="lesson-text">
                        JavaScript uses prototypal inheritance. Let's understand how objects can inherit properties and methods from other objects.
                    </div>
                    <div class="code-example">// Creating a prototype
function Animal(name) {
    this.name = name;
}

Animal.prototype.speak = function() {
    return \`\${this.name} makes a sound.\`;
};

// Inheritance
function Dog(name) {
    Animal.call(this, name);
}

Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

Dog.prototype.speak = function() {
    return \`\${this.name} barks!\`;
};

const dog = new Dog('Rex');
console.log(dog.speak()); // Rex barks!</div>
                `,
                hasEditor: true,
                defaultCode: `// Try prototypes and inheritance

// Base class
function Vehicle(make, model) {
    this.make = make;
    this.model = model;
}

Vehicle.prototype.getInfo = function() {
    return \`\${this.make} \${this.model}\`;
};

// Inherited class
function Car(make, model, year) {
    Vehicle.call(this, make, model);
    this.year = year;
}

Car.prototype = Object.create(Vehicle.prototype);
Car.prototype.constructor = Car;

Car.prototype.getFullInfo = function() {
    return \`\${this.getInfo()} (\${this.year})\`;
};

// Create instances
const myCar = new Car('Toyota', 'Camry', 2020);
console.log(myCar.getFullInfo()); // Toyota Camry (2020)

// Add new method to Car
Car.prototype.start = function() {
    return \`Starting \${this.getInfo()}...\`;
};

console.log(myCar.start()); // Starting Toyota Camry...`
            },
            {
                title: "Generators and Iterators",
                content: `
                    <h2 class="lesson-title">üîÑ Generators and Iterators</h2>
                    <div class="lesson-text">
                        Generators and iterators provide powerful ways to work with sequences of data and control flow in JavaScript.
                    </div>
                    <div class="code-example">// Generator function
function* numberGenerator() {
    yield 1;
    yield 2;
    yield 3;
}

const gen = numberGenerator();
console.log(gen.next().value); // 1
console.log(gen.next().value); // 2
console.log(gen.next().value); // 3

// Iterator
const iterable = {
    *[Symbol.iterator]() {
        yield 1;
        yield 2;
        yield 3;
    }
};

for (const num of iterable) {
    console.log(num);
}</div>
                `,
                hasEditor: true,
                defaultCode: `// Try generators and iterators

// Generator function
function* fibonacci() {
    let [prev, curr] = [0, 1];
    while (true) {
        yield curr;
        [prev, curr] = [curr, prev + curr];
    }
}

// Get first 5 Fibonacci numbers
const fib = fibonacci();
for (let i = 0; i < 5; i++) {
    console.log(fib.next().value);
}

// Custom iterator
const countdown = {
    start: 5,
    *[Symbol.iterator]() {
        for (let i = this.start; i > 0; i--) {
            yield i;
        }
    }
};

console.log('\\nCountdown:');
for (const num of countdown) {
    console.log(num);
}`
            },
            {
                title: "Proxy and Reflect",
                content: `
                    <h2 class="lesson-title">üé≠ Proxy and Reflect</h2>
                    <div class="lesson-text">
                        Proxy and Reflect are powerful features for intercepting and customizing operations on objects.
                    </div>
                    <div class="code-example">// Creating a proxy
const handler = {
    get: function(target, prop) {
        return prop in target ? target[prop] : 'Property not found';
    },
    set: function(target, prop, value) {
        if (typeof value === 'number') {
            target[prop] = value;
            return true;
        }
        return false;
    }
};

const proxy = new Proxy({}, handler);
proxy.age = 25;
console.log(proxy.age); // 25
console.log(proxy.name); // Property not found</div>
                `,
                hasEditor: true,
                defaultCode: `// Try Proxy and Reflect

// Validation proxy
const validator = {
    set: function(obj, prop, value) {
        if (prop === 'age') {
            if (!Number.isInteger(value)) {
                throw new TypeError('Age must be an integer');
            }
            if (value < 0 || value > 150) {
                throw new RangeError('Age must be between 0 and 150');
            }
        }
        obj[prop] = value;
        return true;
    }
};

const person = new Proxy({}, validator);

try {
    person.age = 25;
    console.log('Age set to:', person.age);
    
    person.age = 'not a number'; // This will throw an error
} catch (e) {
    console.error('Error:', e.message);
}

// Using Reflect
const user = {
    name: 'John',
    age: 30
};

console.log('\\nUsing Reflect:');
console.log(Reflect.get(user, 'name')); // John
console.log(Reflect.has(user, 'age')); // true
console.log(Reflect.ownKeys(user)); // ['name', 'age']`
            },
            {
                title: "Symbols and Well-Known Symbols",
                content: `
                    <h2 class="lesson-title">üîë Symbols and Well-Known Symbols</h2>
                    <div class="lesson-text">
                        Symbols are unique and immutable primitive values that can be used as object property keys.
                    </div>
                    <div class="code-example">// Creating symbols
const sym1 = Symbol('description');
const sym2 = Symbol('description');
console.log(sym1 === sym2); // false

// Using symbols as property keys
const obj = {
    [Symbol('id')]: 1,
    [Symbol.for('shared')]: 'shared value'
};

// Well-known symbols
const arr = [1, 2, 3];
const iterator = arr[Symbol.iterator]();
console.log(iterator.next()); // { value: 1, done: false }</div>
                `,
                hasEditor: true,
                defaultCode: `// Try Symbols

// Creating and using symbols
const id = Symbol('id');
const user = {
    name: 'John',
    [id]: 123
};

console.log(user[id]); // 123
console.log(Object.getOwnPropertySymbols(user)); // [Symbol(id)]

// Well-known symbols
class Collection {
    constructor(items) {
        this.items = items;
    }

    *[Symbol.iterator]() {
        for (const item of this.items) {
            yield item;
        }
    }

    [Symbol.toPrimitive](hint) {
        if (hint === 'number') {
            return this.items.length;
        }
        return this.items.join(', ');
    }
}

const collection = new Collection(['a', 'b', 'c']);

console.log('\\nIterating:');
for (const item of collection) {
    console.log(item);
}

console.log('\\nConverting to primitive:');
console.log(+collection); // 3
console.log(\`\${collection}\`); // a, b, c`
            },
            {
                title: "Decorators and Metadata",
                content: `
                    <h2 class="lesson-title">‚ú® Decorators and Metadata</h2>
                    <div class="lesson-text">
                        Decorators are a way to modify classes and their members at design time.
                    </div>
                    <div class="code-example">// Simple decorator
function log(target, key, descriptor) {
    const original = descriptor.value;
    descriptor.value = function(...args) {
        console.log(\`Calling \${key} with args: \${args}\`);
        return original.apply(this, args);
    };
    return descriptor;
}

class Calculator {
    @log
    add(a, b) {
        return a + b;
    }
}</div>
                `,
                hasEditor: true,
                defaultCode: `// Try decorators (Note: Decorators are a stage 2 proposal)

// Property decorator
function readonly(target, key, descriptor) {
    descriptor.writable = false;
    return descriptor;
}

// Method decorator
function log(target, key, descriptor) {
    const original = descriptor.value;
    descriptor.value = function(...args) {
        console.log(\`Calling \${key} with args: \${args}\`);
        return original.apply(this, args);
    };
    return descriptor;
}

// Class decorator
function sealed(constructor) {
    Object.seal(constructor);
    Object.seal(constructor.prototype);
}

// Using decorators
@sealed
class User {
    constructor(name) {
        this.name = name;
    }

    @readonly
    id = 1;

    @log
    greet(message) {
        return \`\${this.name} says: \${message}\`;
    }
}

const user = new User('John');
console.log(user.greet('Hello!')); // Logs the call and returns the greeting
console.log(user.id); // 1

// This will throw an error in strict mode
// user.id = 2;`
            }
        ];

        // Add performance optimizations
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        // Cache DOM elements
        const domCache = {
            contentArea: null,
            lessonList: null,
            prevBtn: null,
            nextBtn: null,
            output: null,
            initialize: function() {
                this.contentArea = document.getElementById('lessonContent');
                this.lessonList = document.getElementById('lessonList');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
            }
        };

        // Cache lesson content
        const lessonCache = new Map();

        function initializeApp() {
            try {
                domCache.initialize();
                populateLessonList();
                showLesson(0);
                
                // Add performance monitoring
                if (window.performance && window.performance.mark) {
                    window.performance.mark('app-initialized');
                }
            } catch (error) {
                console.error('Error initializing app:', error);
                alert('An error occurred while initializing the application. Please refresh the page.');
            }
        }

        function populateLessonList() {
            try {
                if (!domCache.lessonList) return;
                
                // Use DocumentFragment for better performance
                const fragment = document.createDocumentFragment();
                
                lessons.forEach((lesson, index) => {
                    const li = document.createElement('li');
                    li.className = 'lesson-item';
                    li.innerHTML = `<button class="lesson-btn" onclick="showLesson(${index})">${index + 1}. ${lesson.title}</button>`;
                    fragment.appendChild(li);
                });
                
                domCache.lessonList.innerHTML = '';
                domCache.lessonList.appendChild(fragment);
            } catch (error) {
                console.error('Error populating lesson list:', error);
            }
        }

        // Debounced version of showLesson
        const debouncedShowLesson = debounce((index) => {
            try {
                currentLesson = index;
                const lesson = lessons[index];
                
                if (!domCache.contentArea) {
                    throw new Error('Content area not found');
                }
                
                // Update active lesson button
                document.querySelectorAll('.lesson-btn').forEach((btn, i) => {
                    btn.classList.toggle('active', i === index);
                });
                
                // Check cache first
                let content = lessonCache.get(index);
                if (!content) {
                    let editorHTML = '';
                    if (lesson.hasEditor) {
                        editorHTML = `
                            <div class="code-editor">
                                <div class="editor-header">
                                    <span>üíª Try it yourself</span>
                                    <button class="run-btn" onclick="runCode()">Run Code</button>
                                </div>
                                <textarea class="editor-textarea" id="codeEditor">${lesson.defaultCode || ''}</textarea>
                                <div class="output" id="output">Click "Run Code" to see the output</div>
                            </div>
                        `;
                    }
                    content = lesson.content + editorHTML;
                    lessonCache.set(index, content);
                }
                
                domCache.contentArea.innerHTML = content;
                
                // Initialize CodeMirror if editor exists
                if (lesson.hasEditor) {
                    // Clean up previous editor instance if it exists
                    if (window.currentEditor) {
                        window.currentEditor.toTextArea();
                    }

                    const editor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
                        mode: 'javascript',
                        theme: 'dracula',
                        lineNumbers: true,
                        matchBrackets: true,
                        indentUnit: 4,
                        tabSize: 4,
                        lineWrapping: true,
                        autoCloseBrackets: true,
                        foldGutter: true,
                        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],
                        extraKeys: {
                            'Ctrl-Space': 'autocomplete',
                            'Tab': function(cm) {
                                if (cm.somethingSelected()) {
                                    cm.indentSelection('add');
                                } else {
                                    cm.replaceSelection('    ', 'end');
                                }
                            }
                        }
                    });

                    // Store editor instance
                    window.currentEditor = editor;

                    // Add autocomplete on typing with debounce
                    editor.on('keyup', debounce(function(cm, event) {
                        if (!cm.state.completionActive && // don't show if already active
                            event.keyCode != 13 && // don't show on enter
                            event.keyCode != 27) { // don't show on escape
                            CodeMirror.commands.autocomplete(cm);
                        }
                    }, 150));

                    // Focus the editor
                    editor.focus();
                }
                
                // Update navigation buttons
                updateNavButtons();
            } catch (error) {
                console.error('Error showing lesson:', error);
                alert('An error occurred while loading the lesson. Please try again.');
            }
        }, 100);

        // Debounced version of runCode
        const debouncedRunCode = debounce(() => {
            try {
                const code = window.currentEditor ? window.currentEditor.getValue() : '';
                const output = document.getElementById('output');
                
                if (!output) {
                    throw new Error('Output element not found');
                }
                
                // Clear previous output
                output.innerHTML = '';
                
                // Capture console.log output
                const originalLog = console.log;
                const originalError = console.error;
                const logs = [];
                
                console.log = function(...args) {
                    logs.push(args.map(arg => 
                        typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                    ).join(' '));
                    originalLog.apply(console, args);
                };

                console.error = function(...args) {
                    logs.push('Error: ' + args.map(arg => 
                        typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                    ).join(' '));
                    originalError.apply(console, args);
                };
                
                try {
                    // Create a safe evaluation context
                    const safeEval = new Function('console', `
                        with (Object.create(null)) {
                            ${code}
                        }
                    `);
                    
                    // Execute the code
                    safeEval(console);
                    
                    // Display output
                    if (logs.length > 0) {
                        output.innerHTML = logs.join('\n');
                    } else {
                        output.innerHTML = 'Code executed successfully (no output)';
                    }
                    output.style.color = '#333';
                } catch (error) {
                    output.innerHTML = `Error: ${error.message}`;
                    output.style.color = '#dc3545';
                } finally {
                    // Restore original console methods
                    console.log = originalLog;
                    console.error = originalError;
                }
            } catch (error) {
                console.error('Error running code:', error);
                alert('An error occurred while running the code. Please try again.');
            }
        }, 150);

        // Restore navigation functions
        function previousLesson() {
            if (currentLesson > 0) {
                debouncedShowLesson(currentLesson - 1);
            }
        }

        function nextLesson() {
            if (currentLesson < lessons.length - 1) {
                debouncedShowLesson(currentLesson + 1);
            }
        }

        // Update the runCode function to use the debounced version
        function runCode() {
            debouncedRunCode();
        }

        // Update the showLesson function to use the debounced version
        function showLesson(index) {
            debouncedShowLesson(index);
        }

        function updateNavButtons() {
            try {
                if (!domCache.prevBtn || !domCache.nextBtn) {
                    throw new Error('Navigation buttons not found');
                }
                
                domCache.prevBtn.disabled = currentLesson === 0;
                domCache.nextBtn.disabled = currentLesson === lessons.length - 1;
            } catch (error) {
                console.error('Error updating navigation buttons:', error);
            }
        }

        // Add performance monitoring
        if (window.performance && window.performance.mark) {
            window.performance.mark('app-start');
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            try {
                initializeApp();
                if (window.performance && window.performance.mark) {
                    window.performance.mark('app-loaded');
                    window.performance.measure('app-initialization', 'app-start', 'app-loaded');
                }
            } catch (error) {
                console.error('Error initializing app:', error);
                alert('An error occurred while initializing the application. Please refresh the page.');
            }
        });

        // Clean up on page unload
        window.addEventListener('unload', function() {
            // Clear caches
            lessonCache.clear();
            if (window.currentEditor) {
                window.currentEditor.toTextArea();
            }
        });
    </script>
</body>
</html>